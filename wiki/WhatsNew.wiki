#summary Release History
#labels Featured,Phase-Deploy

= crashrpt v1.2.7 =

CrashRpt v1.2.7 introduces automated tests, improves error report post-processing scripts and fixes some detected issues. Below the complete list of changes is presented. 

  - Added Tests project that implements automated tests for CrashRpt and `CrashRptProbe` functionality. 

  - Reorganized directory structure to better reflect architecture.

  - Updated tinyxml, minizip and zlib files to the latest available versions.

  - Refactored `scripts/postprocess.bat`. It now better groups similar error reports.

  - New tag `GeoLocation` - user's geographic location like 'en-us' is now recorded inside of crash description XML.

  - New tag `OSIs64Bit` - detects if user's OS is 64-bit and records this inside of crash description XML.

  - Improved the way `crprober.exe` cleans up its temporary files.

  - New columns `CRP_COL_OS_IS_64BIT` and `CRP_COL_GEO_LOCATION` for `CRP_TBL_XMLDESC_MISC` table.

  - New column `CRP_COL_EXCEPTION_THREAD_STACK_MD5` for `CRP_TBL_MDMP_MISC` table.

  - Fixed issue with Chineese symbols in app name (issue 54). 

  - Improved `CFilePreviewCtrl` to support UTF-8 and UTF-16 encoding (issue 56). Also improved `WM_MOUSEWHEEL` message handling (scrolling preview by mouse wheel).

  - Using critical section to avoid access to CCrashHandler from several crashed threads (issue 52).

  - Fixed: Leaving `pszRestartCmdLine NULL`, gives new application instance blank first argument (issue 50).

  - Fixed incorrect argument order in `crAddRegKeyA` (issue 49).

  - Added new flag `CR_INST_STORE_ZIP_ARCHIVES` that allows to store ZIP archives along with uncompressed error report files (issue 53).

  - Fixed: Version info caused crash (issue 48).

  - Improved documentation (section Architecture Overview).

  - Improved documentation (section Using Crash Minidump) (issue 45).

  - Fixed DNS access problem for SMTP proxy (issue 51).


= crashrpt v1.2.6 =

CrashRpt v1.2.6 introduces support of Visual Studio 2010, an ability to add a dump of a registry key and fixes some detected issues. Below the complete list of changes is presented. 

  * Added project files for Visual Studio 2010 (issue 35).

  * New API function `crAddRegKey` allowing to add a registry key dump to the error report.

  * Using `.def` files to undecorate API function names.

  * Extended `crEmulateCrash()`, new constant `CR_THROW` -- tests how a thrown C++   exception is intercepted (issue 35).

  * Fixed: `exit(1)` in different thread may cause crashes (issue 43). Now using `TerminateProcess()` instead of `exit()` or `ExitProcess()`.

  * Fixed: Error report is sent twice if crashes in a DLL (issue 44). Using crash counter variable to avoid multiple crash report generation.

  * Removed 'Type' column from Error Report Details dialog.

= crashrpt v1.2.5 =

CrashRpt v1.2.5 introduces queued error report delivery and fixes some detected issues. Below the complete list of changes is presented. 

  * Introduced an ability to send error reports queued for delivery (issue 33). New flag `CR_INST_SEND_QUEUED_REPORTS`.

  * Fixed: zipped file timestamps are incorrect (issue 40).

  * Fixed: Release buffer from `DnsQuery` (issue 42).

  * Fixed: `exit(1)` in different thread may cause crashes (issue 43).

  * Fixed: A bug in `CScreenCapture` multiple monitors

  * Fixed: Issue with `g_CrashInfo.m_uPriorities`. Introduced `CR_NEGATIVE_PRIORITY` constant.

  * Refactored php example of how to receive error reports by HTTP.

  * Extended documentation. 

= crashrpt v1.2.4 =

  * Introduced an ability to restart an application automatically on crash. The  application is restarted only if at least 60 seconds have elapsed since its start. This is done to avoid cyclic restarts of an unstable application which crashes on start up. This is the enhancement requested in issue 11.

  * Introduced an ability to preview graphics files (BMP, PNG) in Details dialog. This is useful if a user would like to preview the desktop screenshot image attached to the error report.

  * An ability to not include minidump file into error report. This implements the enhancement requested in issue 33.

  * An ability to specify custom email text by using `CR_INSTALL_INFO::pszEmailText` member.

  * An ability to specify custom directory and file name for the language file. This will be useful for applications that need to modify UI language on the fly. This is requested in issue 34.

  * An ability to disable particular error report sending transport by specifying a negative priority in `CR_INSTALL_INFO::uPriorities` array.

  * An ability to specify SMTP proxy for built-in SMTP client. This may be useful for server-side software that would need to configure SMTP transport without querying DNS MX (mail exchange) record.


= crashrpt v1.2.3 =

CrashRpt v1.2.3 improves file preview (HEX and text) in Error Report Details dialog and fixes some detected issues. Below the complete list of changes is presented. 

  * Improved file preview in DetailDlg. Now a file can be previewed in HEX or in text mode.

  * Ability to customize the port for SMTP connection.

  * Fixed: CrashSender Crash (issue 24)

  * Fixed: dbghelp.dll cannot be found (issue 26)

  * Fixed: Certain fields cannot be omitted (issue 27).

  * Fixed: Release LIB configuration is obsolete (issue 28). There may be some people using Release LIB configuration, so the configuration was made up-to-date.

= crashrpt v1.2.2 =

CrashRpt v1.2.2 improves sending error reports over HTTP connection, improves error report generation by doing all complex actions outside of the crashed process, introduces non-GUI mode and restyles the documentation. Below the complete list of changes is presented. 

  * WTL files are now included into CrashRpt distribution.

  * Completely removed dependency on zip_utils (it is better to use minizip).

  * Removed vs.2008 project files. If you need to compile in VS 2008 and higher, use VS project convertor.

  * Modifyed communication between CrashRpt.dll and CrashSender.exe. Now XML file is used for this purpose instead of named pipe.

  * Refactored code. After crash, all complex actions are done outside of the crashed process (inside of CrashSender.exe). This includes taking desktop screenshot, minidump generation, file copying, file compression and sending.

  * Introduced silent mode (CrashRpt sends report silently without showing GUI). This is useful for services and server processes.

  * Improved documentation (restyling).

  * Introduced multi-part HTTP uploads. This will help to send large error reports more effectively.

  * Fixed: Doesn't work in Windows 2000 (issue 17)
  * Fixed: CrashSender doesn't work on Windows 2000 (issue 21)

  * Fixed: mistyping? (issue 18)
  * Fixed: inconsistency in xml Crash Log (issue 20)
  * Fixed some problems with UTF-8 encoded strings written by tinixml.

  * Fixed: crprober.exe does not work well (issue 19)

  * New: Introcuded an ability to specify the folder where crash reports are created (issue 22)

  * New: Introduced an ability to export error report through "Export..." button on Error Report Details dialog.



= crashrpt v1.2.1 =

CrashRpt v1.2.1 introduces support of compilation for x64 platform and desktop screenshots at the moment of crash, extends crash descriptor XML, improves crash report generation functionality and user interface. Below the list of changes is presented. 

  * Refactored crash report generation and sending functionality. Now report files are stored in unzipped state, compression is performed during sending procedure. This will be required for huge reports (that will be fully supported in the future).

  * Added support of x64 platform (issue 7).

  * Added an ability to make screenshots of the screen or the main app window on crash through crAddScreenshot() function (issue 8).

  * More information is collected on crash (memory usage, open handles count and GUI resources)

  * Ability to add custom text properties to the crash descriptor through crAddProperty() function    (issue 9).

  * New function crAddFile2() improving the application-defined files addition.

  * Ability to control which dbghelp.dll to use (issue 10).

  * Ability to define the type of minidump (from normal size to huge size) (issue 10). 
  Contributed by crcode.s.

  * Fixed incorrectly displayed file size in DetailsDlg (issue 14).

  * Fixed untranslatable Close button of DetailsDlg (issue 15).

  * Fixed: Access to CCrashHandler::m_ThreadExceptionHandlers should be synchronized (issue 16).

= crashrpt v1.2.0 =

CrashRpt v1.2.0 introduces crash report processing tool (crporber.exe), crash report processing application programming interface (CrashRptProbe API), extends documentation and fixes some minor bugs. Below the list of changes is presented. 

  * Reorgranized the include files; moved from 'CrashRpt\include' to 'include'.

  * Support of error report batch processing (crprober.exe tool).

  * New application programming interface for error report processing (CrashRptProbe.dll).

  * Introduced functions crpOpenErrorReport(), crpCloseErrorReport(),
  crpGetProperty(), crpGetLastErrorMsg().

  * Fixed problem with missing gzio.c (issue 6).

  * Extended documentation : new section 'Automating Error Report Processing'.

= crashrpt v1.1.3 =

CrashRpt v1.1.3 introduces support of multi-lingual UI, improves and reorganizes project documentation. Below the list of changes is presented. 

  * Support of globalization and RTL languages.

  * Reorganized and improved documentation; New pages Architecture Overview and Internationalization Support.

  * Added <?xml version="1.0" encoding="utf-8" ?> element in the beginning of crash descriptor XML.

= crashrpt v1.1.2 =

CrashRpt v1.1.2 introduces an ablity to define the Privacy Policy for error reports, extends API, improves documentation and fixes some minor bugs. Below the list of changes is presented. 

  * crInstall: Ability to select what exception handlers to install

  * Extended CR_INSTALL_INFO with new members: `pszPrivacyPolicyURL` and `dwFlags`.

  * New API function `crInstallToCurrentThead2()`.

  * Improved documentation; Fixed some mistakes; Added info on compiling CrashRpt in VC++ Express

  * Using standard Windows convention `__stdcall` instead of `__cdecl` in API function declarations 

  * Using undecorated API function names (extern "C")

  * Using static zlib linkage instead of zlib DLL

  * Replaced obsolete ATL 3.0 string conversion macros with self-written class `strconv_t`.

  * Fixed some compilation warnings in VC++ Express

  * Fixed wrong "unh" message box in unhandled exception handler

  * Fixed bug in `CUtility::GetOSFriendlyName()` -- Operating system build number and service pack are never retrieved 

  * Fixed error with writing 'ExceptionCode' to XML (always zero)

  * Writing exception code to XML in hex format

  * Refactored code of `crEmulateCrash()`

= crashrpt v1.1.1 =

CrashRpt v1.1.1 contains several improvements over previous version of CrashRpt. Below the list of changes is presented. 

  * Support of Visual Studio Express edition (EVS 2005 and EVS 2008)

  * Improved documentation; New page About Exceptions and Exception Handling

  * New wrapper classes CrAutoInstallHelper and CrThreadAutoInstallHelper

  * MD5 hash for error report is calculated and attached to email when error report is sent over email

  * Error report is removed when sent successfuly

  * Refactored error report sending code

  * Extended E-mail message text generation for error reports being sent over email

  * 'Copy selected lines' and 'copy the whole log' from context menu of error report sending log

  * Fixed many VS-version-specific bugs

= crashrpt v1.1 beta =

CrashRpt v1.1b contains a lot of improvements over previous version of CrashRpt. Below the list of changes is presented. 

This release has status 'beta' and is made available for public beta testing. We appreciate any user feedback, bug reports and feature requests.

Major Features:

- Removed support of Visual Studio 6.0 and added support of VS.NET 2003, VS 2005 and VS 2008

- New API functions (crInstall(); crUninstall(); crInstallToCurrentThread(); crUninstallFromCurrentThread(); crGenerateErrorReport(); crExceptionFilter();
  crEmulateCrash(); crGetLastErrorMsg())

- Character set specific functions have A and W suffixes. Introduced macros for defining character set indepandent function names mapping

- Support of various C++ exception handlers (Visual Studio-specific)

- Crash report generation and crash sending functionality are separeted into different modules (CrashRpt.dll and CrashSender.exe)

- New ways of sending error reports: using HTTP connection, using SMTP embed client or (as in 1.0) using Simple MAPI.

- Each error report is now assigned a unique CrashGUID

- Doxygen-based documentation system

- Revamped GUI of Send Error Report dialog

- New Error Report Sending Progress dialog

- Improved crash descriptor XML format


Minor features:

- Using TinyXml framework instead of MSXML

- Using the latest version (at the moment) of dbghelp 

- Using the latest version (at the moment) of zlib